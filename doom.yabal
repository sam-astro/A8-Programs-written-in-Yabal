
const var pixels = create_pointer(53871, 1)

const var SCREENW = 108

const var channelA = "666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..999999...666666..999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666...9999999.....666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..999999..666666..666666..999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..99999999.......666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..999999..666666...999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..99999999......666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..999999..666666..666666..999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..RRRRRR..OOOOOO..RRRRRR..TTTTTT..NNNNNN..TTTTTT..VVVVVV..TTTTTT..NNNNNN..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..999999..666666...999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..99999999......666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..999999..666666...999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..VVVVVV..TTTTTT..TTTTTT..TTTTTT..VVVVVV..TTTTTT..TTTTTT..VVVVVV..888888..888888..GGGGGG..888888..888888..EEEEEE..888888..888888..DDDDDD..888888..888888..BBBBBB..888888..888888..CCCCCC..DDDDDD..888888..888888..GGGGGG..888888..888888..EEEEEE..888888..888888..DDDDDD..888888..888888..BBBBBBBB......888888..888888..GGGGGG..888888..888888..EEEEEE..888888..888888..DDDDDD..888888..888888..BBBBBB..888888..888888..CCCCCC..DDDDDD..888888..888888..GGGGGG..888888..888888..EEEEEE..888888..888888..OOOOOO..LLLLLL..OOOOOO..JJJJJJ..OOOOOO..OOOOOO..OOOOOO..GGGGGG..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..999999..666666...999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..99999999......666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..999999..666666..666666..999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..99999999......AAAAAA..AAAAAA..KKKKKK..AAAAAA..AAAAAA..IIIIII..AAAAAA..AAAAAA..GGGGGG..AAAAAA..AAAAAA..EEEEEE..AAAAAA..AAAAAA..FFFFFF..GGGGGG..999999..999999..IIIIII..999999..999999..GGGGGG..999999..999999..EEEEEE..999999..888888..DDDDDDDD......666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..999999..666666..666666..999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..OOOOOO..EEEEEE..OOOOOO..TTTTTT..TTTTTT..EEEEEE..OOOOOO..VVVVVV..VVVVVV..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..999999..666666..666666..999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666...9999999.....666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..AAAAAA..666666..666666..666666..666666...999999..AAAAAA..666666..666666..CCCCCC..666666..666666..BBBBBB..666666..666666..NNNNNN..EEEEEE..RRRRRR..GGGGGG..VVVVVV..NNNNNN..VVVVVV..RRRRRR..666666..666666..EEEEEE..666666..666666..EEEEEE..666666..666666..BBBBBB..666666..666666..BBBBBB..666666...BBBBBB..CCCCCC..666666..666666..EEEEEE..666666..666666..EEEEEE..666666..666666..CCCCCC..666666..666666...AAAAAAA.....666666..666666..EEEEEE..666666..666666..EEEEEE..666666..666666..BBBBBB..666666..666666..BBBBBB......666666..666666..EEEEEE..666666..666666..EEEEEE..666666..666666..VVVVVV..TTTTTT..VVVVVV..VVVVVV..OOOOOO..VVVVVV..VVVVVV..TTTTTT..888888..888888..JJJJJJ..888888..888888..IIIIII..888888..888888..FFFFFF..888888..888888..EEEEEE..888888...EEEEEE..GGGGGG..888888..888888..JJJJJJ..888888..888888..IIIIII..888888..888888..GGGGGG..888888..888888...EEEEEE.....888888..888888..JJJJJJ..888888..888888..IIIIII..888888..888888..FFFFFF..888888..888888..EEEEEE..888888..888888..EEEEEE..GGGGGG..888888..888888..JJJJJJ..888888..888888..IIIIII..888888..888888..OOOOOO..OOOOOO..GGGGGG..OOOOOO..VVVVVV..OOOOOO..OOOOOO..GGGGGG..666666..666666..EEEEEE..666666..666666..EEEEEE..666666..666666..BBBBBB..666666..666666..BBBBBB..666666...BBBBBB..CCCCCC..666666..666666..EEEEEE..666666..666666..EEEEEE..666666..666666..CCCCCC..666666....AAAAAAA.....666666..666666..EEEEEE..666666..666666..EEEEEE..666666..666666..BBBBBB..666666..666666..BBBBBB..666666...BBBBBB..CCCCCC..666666..666666..EEEEEE..666666..666666..EEEEEE..666666..666666..CCCCCC..666666..666666..AAAAAAAA......AAAAAA..AAAAAA..TTTTTT..AAAAAA..AAAAAA..RRRRRR..AAAAAA..AAAAAA..OOOOOO..AAAAAA..AAAAAA..KKKKKK..AAAAAA..AAAAAA..KKKKKK..OOOOOO..999999..999999..RRRRRR..999999..999999..OOOOOO..999999..999999..NNNNNN..999999..888888..IIIIII......666666..666666..EEEEEE..666666..666666..EEEEEE..666666..666666..BBBBBB..666666..666666..BBBBBB..666666...BBBBBB..CCCCCC..666666..666666..EEEEEE..666666..666666..EEEEEE..666666..666666..VVVVVV..RRRRRR..GGGGGG..BBBBBB..VVVVVV..VVVVVV..RRRRRR..EEEEEE..BBBBBB...CCCCCC........................"
const var channelB = "............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................666666..................................................................................................................................................................................................................................................................................................................................................................................................................................................VVVVVV........................................................................................................................................................................................................................................................................................................................................................................................................................................................................JJJJJJ..JJJJJJ..................JJJJJJ..JJJJJJ.....................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................IIIIII..........................................666666........................................................................................................................................................................................................................................................................................................................................................................................................................JJJJJJ..........................................IIIIII..................................................................................................666666....................................................................................................................................................................................................................................................................................................VVVVVV..........OOOOOO..........................VVVVVV...............................................................................................................................................................................................................................................................................................................................................................................................................................................JJJJJJ..........JJJJJJ..........JJJJJJ..JJJJJJ.........................................................................................................................................................................................................................................................................................................................666666..............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................999999..........IIIIII................................................."
const var channelC = "............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................"
const var channelD = "............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................"


const var chars = create_pointer(53546, 1)
var expansionPort = create_pointer(53500, 1)

var curChar = 0
var noteVal = 0
var freqVal = 0
var trackerLocation = 0

var PlaybackSpeed = 80 // 80

void GetFreq(){
    freqVal = curChar switch {
        '1' => 1,
        '2' => 2,
        '3' => 3,
        '4' => 4,
        '5' => 5,
        '6' => 6,
        '7' => 7,
        '8' => 8,
        '9' => 9,
        'A' => 10,
        'B' => 11,
        'C' => 12,
        'D' => 13,
        'E' => 14,
        'F' => 15,
        'G' => 16,
        'H' => 17,
        'I' => 18,
        'J' => 19,
        'K' => 20,
        'L' => 21,
        'M' => 22,
        'N' => 23,
        'O' => 24,
        'P' => 25,
        'Q' => 26,
        'R' => 27,
        'S' => 28,
        'T' => 29,
        'U' => 30,
        'V' => 31,
        54  => 0,
        _ => 0
    }
}

// Include and draw doom image
var file = include_image("lo_rez_doom.png")
var screen = create_pointer(53871, 1)

var meta = file[-1]
var width = meta >> 8 & 0xFF
var height = meta & 0xFF

for (var x = 0; x < width; x++) {
    for (var y = 0; y < height; y++) {
        var screenOffset = (y * 108) + x
        var pixelOffset = (y * width) + x
        var pixel = file[pixelOffset]
        var a = pixel >> 15
        if (a == 1) {
            screen[screenOffset] = pixel
        }
    }
}


while(true){
    // Iterate through all notes and play them
    var maxSize = sizeof(channelA)
    maxSize -= 1
    trackerLocation = 0
    while(trackerLocation < maxSize) {
        
        ///////////////
        // Channel A //
        ///////////////
        // Process new note
        
        freqVal = 0
        curChar = channelA[trackerLocation]
        GetFreq()
        
        // Shift left
        freqVal = freqVal << 11
        // // Also add channel ID
        freqVal += 256
        
        // Write note value to expansion port
        expansionPort[2] = freqVal
        ///////////////
        // Channel B //
        ///////////////
        if(trackerLocation < sizeof(channelB)){
            // Process new note
            freqVal = 0
            curChar = channelB[trackerLocation]
            GetFreq()
            // Shift left
            freqVal = freqVal << 11
            // // Also add channel ID
            freqVal += 512
            // Write note value to expansion port
            expansionPort[2] = freqVal
        }
        ///////////////
        // Channel C //
        ///////////////
        if(trackerLocation < sizeof(channelC)){
            // Process new note
            freqVal = 0
            curChar = channelC[trackerLocation]
            GetFreq()
            // Shift left
            freqVal = freqVal << 11
            // // Also add channel ID
            freqVal += 768
            // Write note value to expansion port
            expansionPort[2] = freqVal
        }
        ///////////////
        // Channel D //
        ///////////////
        
        if(trackerLocation < sizeof(channelD)){
            // Process new note
            freqVal = 0
            curChar = channelD[trackerLocation]
            GetFreq()
            // Shift left
            freqVal = freqVal << 11
            // // Also add channel ID
            freqVal += 1024
            // Write note value to expansion port
            expansionPort[2] = freqVal
        }
        // Delay for the next set of notes
        for (var l = 0; l < 90 * PlaybackSpeed; l++){
            for (var o = 0; o < 1; o++){
                // Do nothing  _(¦3」∠)_
            }
        }
        trackerLocation += 1
        
    }
    // Stop all audio channels
    expansionPort[2] = 256
    expansionPort[2] = 512
    expansionPort[2] = 768
    expansionPort[2] = 1024
    
}